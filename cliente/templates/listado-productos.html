{% extends 'base.html' %} {% block content %} {% load static%}
<!-- Modal -->
{% for product in products %}
<div class="modal fade" id="exampleModal{{ product.id }}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{ product.name }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" id="registroProducto" action="{%url 'editar_producto' product.id %}" class="px-5" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre producto</label>
            <input type="text" class="form-control" id="nombre" placeholder="Nombre producto" name="nombre" value="{{ product.name }}">
            <p class="text-danger mb-2 d-none" id="alertNombre"></p>
          </div>

          <div class="mb-3">
            <label for="precio" class="form-label">Precio</label>
            <input type="number" min="1000" class="form-control" id="precio" placeholder="Precio producto" name="precio" value="{{ product.price }}">
            <p class="text-danger mb-2 d-none" id="alertPrecio"></p>
          </div>

          <div class="mb-3">
            <label for="marca" class="form-label">Marca</label>
            <select class="form-control" id="marca" name="marca">
              <option value="nike" {% if product.brand == 'nike' %} selected {% endif %}>Nike</option>
              <option value="adidas" {% if product.brand == 'adidas' %} selected {% endif %}>Adidas</option>
              <option value="puma" {% if product.brand == 'puma' %} selected {% endif %}>Puma</option>
              <!-- Agrega más opciones de marca según sea necesario -->
            </select>
            <p class="text-danger mb-2 d-none" id="alertMarca"></p>
          </div>

          <div class="mb-3">
            <label for="descripcion" class="form-label">Descripcion producto</label>
            <textarea class="form-control" id="descripcion" rows="3" name="descripcion">{{ product.description }}</textarea>
            <p class="text-danger mb-2 d-none" id="alertDescripcion"></p>
          </div>

          <div class="mb-3">
            <label for="imagen" class="form-label">Imagen producto</label>
            <input type="file" class="form-control" id="imagen" name="imagen">
          </div>

          <div class="mb-3">
            <label for="size" class="form-label">Talla de zapatilla</label>
            <input type="text" class="form-control" id="size" placeholder="Talla de zapatilla" name="size" value="{{ product.size }}">
            <p class="text-danger mb-2 d-none" id="alertSize"></p>
          </div>

          <div class="mb-3">
            <label for="gender" class="form-label">Género</label>
            <select class="form-control" id="gender" name="gender">
              <option value="masculino" {% if product.gender == 'masculino' %} selected {% endif %}>Masculino</option>
              <option value="femenino" {% if product.gender == 'femenino' %} selected {% endif %}>Femenino</option>
            </select>
            <p class="text-danger mb-2 d-none" id="alertGender"></p>
          </div>

          <div class="mb-3">
            <label for="model" class="form-label">Modelo</label>
            <input type="text" class="form-control" id="model" placeholder="Modelo" name="model" value="{{ product.model }}">
            <p class="text-danger mb-2 d-none" id="alertModel"></p>
          </div>

          <div class="text-end">
            <button type="cancel" class="btn btn-outline-dark mb-2" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-dark mb-2">Guardar</button>
            <a href="{%url 'eliminar_producto' product.id %}"  class="btn btn-danger">Eliminar</a>
          </div>
        </form>

        <div id="alertSuccess" class="d-none alert alert-success">
          Registro exitoso
        </div>

        <div id="alertError" class="d-none alert alert-error">
          Error en el registro:
        </div>
      </div>

    </div>
  </div>
</div>

{% endfor %}

<style>
  .truncate-cell {
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
</style>
<div class="container-fluid px-5 bg-light my-5">
  <div class="row">
    <div class="col-sm-12 col-md-2">
      <div class="card mb-2">
        <ul class="list-group list-group-flush">
          <a href="{% url 'listar_productos' %}" class="list-group-item"
            >Todos los productos</a
          >
          <a href="{% url 'dashboard' %}" class="list-group-item"
            >Agregar un nuevo producto</a
          >
        

          <a href="{% url 'ordenes' %}" class="list-group-item">Ver Ordenes</a>
          <a hhref="{% url 'ordenes' %}"class="list-group-item">Devoluciones</a>
        </ul>
      </div>
    </div>

    <div class="col-sm-12 col-md-10">
      <section class="card p-5">
        <h4 class="card-tittle mb-4 fw-bold text-success">Products</h4>
        <input
          type="text"
          class="form-control my-2 rounded-pill"
          placeholder="Busca acá"
        />
        <div class="table-responsive" style="height: max-content">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Nombre</th>
                <th scope="col">Marca</th>
                <th scope="col">Descripcion</th>
                <th scope="col">Precio</th>
              </tr>
            </thead>
            <tbody>
              {% for product in products %}
              <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ product.name }}</td>
                <td>{{ product.brand }}</td>
                <td class="truncate-cell">{{ product.description }}</td>
                <td>${{ product.price }}</td>
                <td>
                  <button
                    type="button"
                    class="btn btn-outline-dark"
                    data-bs-toggle="modal"
                    data-bs-target="#exampleModal{{ product.id }}"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="25"
                      height="25"
                      fill="dark"
                      class="bi bi-eye"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"
                      />
                      <path
                        d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"
                      />
                    </svg>
                  </button>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <nav aria-label="Page navigation example text-end">
            <ul class="pagination">
              <li class="page-item">
                <a class="page-link text-dark" href="#">Previous</a>
              </li>
              <li class="page-item">
                <a class="page-link text-dark" href="#">1</a>
              </li>
              <li class="page-item">
                <a class="page-link text-dark" href="#">2</a>
              </li>
              <li class="page-item">
                <a class="page-link text-dark" href="#">3</a>
              </li>
              <li class="page-item">
                <a class="page-link text-dark" href="#">Next</a>
              </li>
            </ul>
          </nav>
        </div>
      </section>
    </div>
  </div>
</div>

{% endblock %}
